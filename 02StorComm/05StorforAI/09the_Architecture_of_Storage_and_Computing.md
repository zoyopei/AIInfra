<!--Copyright © ZOMI 适用于[License](https://github.com/chenzomi12/AIInfra)版权许可-->

# 存算架构思考

书写规范（Writing Conventions）给出了包含文档内的书写约定。请作者与贡献者参考以下约定检查格式，内容一致性与正确性。

这个风格指南随着时间的推移而演变，因为额外的约定被识别出来，并且过去的约定因语言本身的变化而变得过时。规范大多数来自于常见错误的总结。

许多课程都有自己的风格指南。如果发生任何冲突，此类特定于课程的指南优先于该课程。

## 大模型存储架构思考

宏观上走向存算一体，走向近存加速；微观上会走向存算分离架构。

### 宏观——存算一体

存算一体或近存计算，对于大模型应用来说主要的好处

#### 1.减少数据流动。主要是减少数据在片内片外的流动搬运或者用户态和内核态的切换，由此所带来的上下文切换开销、数据传输时延等越少越好。

#### 2.降低能耗。系统架构发展中，本质上要求能耗越低越好，如果存储与计算距离过长，为维持数据信号的稳定，其背后的能耗和维护成本势必上升。


### 微观——存算分离

#### 1.扩展性高。计算算力和存储能力能够根据自身业务动态扩展，运行维护都比较方便。

#### 2.指标易算。计算、存储和网络关键指标不同。计算主要看吞吐率，存储重稳定性，网络重时延。

#### 3.系统复杂度不同。存储对于系统复杂度容错率低，高可用度要求严苛。

#### 4.样本案例。NVIDIA H100 本质上属于存算分离架构，逻辑上是把节点的内存和显存结合一起，通过NVLink高速访问。

### 文件命名

01Introduction.md（序号+首字母大写.md）

### 图片命名

01Introduction.png（序号+首字母大写.md），跟文件命名相同

### 小节包含内容

- 我是 AI System 的爱好者；

- 我也是 AI System 的爱好者；

- 怎么我也是 AI System 的爱好者。

### 小节内容

1. 添加各个章节和小节序号；

2. 添加各个章节和小节序号。

### 小结语思考

- 节内容回顾了 AI 框架在时间维度和技术维度的发展趋势

- 技术上初代 AI 框架解决 AI 编程问题，第二代加速科研和产业落地，第三代结合特定领域语言和任务

- 一起学习了 AI 框架随着的软硬件的发展升级而共同发展，展望 AI 框架的未来

### 参考文献

[1]. XXXX
[2]. XXXX

### 文字

1. 保持中文，中文（英文）。

例如：

2. 英文，数字，长序号两侧加空格，标点符号两侧不需要添加

例如：
使用 MindSpore 框架
使用 MindSpore，
批尺寸（Batch Size），
图 1.3.2，
例如 1 中所示
为 $x$ 字节

### 链接

Http 链接不直接暴露。放于语法[文字](https://github.com/chenzomi12/AISystem)。

### 图片

1. 注意追加图序号。
2. 图片清晰度可以看到内容细节。
3. 图片宽高调整自然。
4. 图片添加引用。
5. 图片要有对应格式解释。
6. 图片文字尽量汉化。

### 代码

1. 代码放于 \``` \```中。
   
```python
# 启动脚本
python train.py --batch_size=256  --model_name=resnet50
```

2. 针对代码追加适当注释解释文字，避免大段大段的英文代码。

3. 文档描述中如果遇到对应的函数，需要加上\` \` 进行包含，如在函数 `pytorch.distribute` 中。

### 表格

1. 追加表序号。

2. 使用 Markdown 语法保持格式一致。

3. 通过语法让表格居中。
   
   <center>表 1.2.1 不同图像分类问题数据集的数据量</center>

| MNIST | ImageNet | Web Images |
| -- | -- | - |
| 6 万样本  | 1600 万样本  | 10 亿量级图像样本  |
| 10 分类  | 1000 分类   | 开放分类       |

4. 表格要有对应文字解释。

5. 如果表格需要用到公式，可以参考下面语法以公式呈现表格。

### 公式

1. 独立公式段落如下所示：

$$
\begin{array}{|c|c|c|}
    \hline
    & 比特数 & 取值范围 \\
    \hline
    FP32& 32 & -3.4 \times 10^{38} \sim + 3.4 \times 10^{38} \\
    \hline
    FP16& 16 & -65504 \sim +65504 \\
    \hline
    INT8 & 8 & -128 \sim +127 \\
    \hline
\end{array}
$$

2. 文章中的公式按照下面方式来处理：我们的计算公式为 $y=ax+b$ 所示。

### 参考文献

向 Markdown 中添加参考文献引用，并且在点击参考文献引用标记时，能够自动跳转到“参考文献”一节中参考文献的详细条目，需要以下两步：

1. **增加锚点**

   “参考文献”是 Markdown 文件末尾独立的一节，向这一节中添加具体的参考文献条目信息和锚点，如下所示：
   
   ```text
   # 参考文献
   
   <div id="ref1"></div>
   
   1. [参考文献](链接)
   ```
   
   **注**：参考文献条目信息可以使用谷歌 Scholar 或是其他文献检索工具导出 ACM Ref 格式的参考文献信息。

2. **增加引用**

   在引用改参考文献的正文部分增加对锚点的引用，使用`<sup>`标注引用，如下所示：
   
   ```text
   这里是引用了参考文献 1 的正文[<sup>[1]</sup>](#ref1)。
   ```

### 语法检查

请校验预览正文

例如：
**文字 ** 多空格则无法呈现
**文字**

### 字符

1. ASCII 字符两侧可以加空格保持美观。例如 x 初值为 100 情况下。
2. （）和，和。和“”等使用中文输入法中的标点符号。

### 中英混杂

- 原则能用中文就用中文
- 首次提到需要
  - 人工智能（Artificial Intelligence），简称 AI
  - 前面提到后，后面可以使用简称 AI
- 例外：
  - 如果 Netron，TensorFlow 这类特定工具名字，可以用英文 
  - 动词要尽量用中文
  - 专有通用名词尽量用中文。例如，编译器

## 术语约定

术语是约束内容一致性重要的方法。

1. 正文中英文中文术语（英文术语-首字母大写），如果需要引用加引用链接。

例如：

部署（Deployment）

注意：中文和括号之间不加空格。

2. 追加到术语表.md

| 英文         | 中文  | 缩写  | 首次提交人 |
| - | --- | --- | -- |
| Deployment | 部署  |     | xx    |
